<div class="row">
  <div class="col-md-9">

    <div class="table-responsive">
      <table class="table table-bordered">
        <thead>
          <th>Project name</th>
          <th>Team Lead</th>
          <th>Location</th>
          <th ng-repeat="week in calendar">
            <span>{{week.weekNumber}} week</span>
          </th>
        </thead>
        <tbody>
          <tr class="info">
            <th colspan="3">Capacity</th>
            <td ng-repeat="week in calendar">
              <span>{{week.capacity}}</span>
            </td>
          </tr>
          <tr ng-repeat="project in projects">
            <td>
              <span>{{project.name}}</span>
            </td>
            <td>{{project.lead}}</td>
            <td>{{project.location}}</td>
            <td ng-repeat="week in calendar">
              <span>{{week.projects[project.id]}}</span>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="success">
            <th colspan="3">Shortfall</th>
            <td ng-repeat="week in calendar">
              <span>{{ getShortfall(week.capacity, week.projects) }}</span>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <div class="col-md-3">
    <accordion close-others="oneAtATime">
      <accordion-group heading="Add project" is-open="status.isFirstOpen" is-disabled="status.isFirstDisabled">
          <form name="projectForm" ng-submit="addProject()" novalidate>
          <div class="form-group">
            <label for="project_name">Project name:</label>
            <input ng-model="project.name" type="text" class="form-control" id="project_name"  ng-required="true">
          </div>
          <div class="form-group">
            <label for="project_lead">Team Lead:</label>
            <input ng-model="project.lead" type="text" class="form-control" id="project_lead" ng-required="true">
          </div>
          <div class="form-group">
            <label for="project_location">Project location:</label>
            <input ng-model="project.location"  type="text" class="form-control" id="project_location" ng-required="true">
          </div>
          
          <div class="form-group">
            <label for="project_start">Start date:</label>
            <div class="input-group">
              <input id="project_start" type="text" class="form-control" datepicker-popup="{{format}}" ng-model="project.start" is-open="datePicker.openedStart" min-date="minDate" datepicker-options="startOptions" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event,'openedStart')"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </div>
          </div>
          <div class="form-group">
            <label for="project_end">End date:</label>
            <div class="input-group">
              <input id="project_end" type="text" class="form-control" datepicker-popup="{{format}}" ng-model="project.end" is-open="datePicker.openedEnd" min-date="project.start" datepicker-options="endOptions" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event,'openedEnd')"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </div>
          </div>
          <button type="submit" class="btn btn-primary" ng-disabled="projectForm.$invalid">Submit</button>
        </form>
        </accordion-group>

        <accordion-group heading="Add capacity" is-open="status.isSecondOpen" is-disabled="status.isSecondDisabled">
          <form name="capacityForm" ng-submit="addCapacity()" novalidate>
            <div class="form-group">
            <label for="cap_project">Project:</label>
            <select id="cap_project" class="form-control" ng-model="capProject"
                ng-options="project.name for project in projects"></select>
          </div>
          <div class="form-group">
            <label for="cap_employee">Employee:</label>
            <select id="cap_employee" class="form-control" ng-model="capEmployee"
                ng-options="employee.name for employee in employees"></select>
          </div>

          <hr>

          <div ng-repeat="capacity in capacities">
            <div class="form-group">
              <label for="cap_value">Capacity:</label>
              <input id="cap_value" class="form-control" ng-model="capValue"
                  ng-model="capValue"></select>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label for="project_start">Start date:</label>
                <div class="input-group">
                  <input id="project_start" type="text" class="form-control" datepicker-popup="{{format}}" ng-model="projectStart" is-open="openedStart" min-date="minDate" datepicker-options="startOptions" ng-required="true" close-text="Close" />
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="openStart($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                  </span>
                </div>
              </div>
              <div class="form-group col-md-6">
                <label for="project_end">End date:</label>
                <div class="input-group">
                  <input id="project_end" type="text" class="form-control" datepicker-popup="{{format}}" ng-model="projectEnd" is-open="openedEnd" min-date="projectStart" datepicker-options="endOptions" ng-required="true" close-text="Close" />
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="openEnd($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                  </span>
                </div>
              </div>
            </div>
            <hr>
          </div>

          <div class="text-right">
            <button type="button" class="btn btn-success btn-sm" ng-click="addCapacity()"><i class="glyphicon glyphicon-plus"></i> Add more</button>
          </div>

          <button type="submit" class="btn btn-primary" ng-disabled="capacityForm.$invalid">Submit</button>

          </ng-form>
        </accordion-group>
    </accordion>
  </div>
</div>
